Тестове завдання має бути виконано на NodeJS

Ви є платіжним агрегатором, який підключають до себе власники сайтів для прийому платежів.
З кожного платежу береться комісія платіжної системи (А + B), ваша комісія (C), а решта виплачується власнику сайту.
Де
  A      - фіксована сума що задається у конфігурації,
  B та С - фіксовані % від загальної суми платежу.
Виплати здійснюються раз на добу.
-------------------------------------------
Платіж 100$:
  A = 5$ ->           = 5$
  B = 2% -> 100$ * 2% = 2$
  C = 1% -> 100$ * 1% = 1$
=========================
FINAL:
 - owner     = 92$
 - comission =  8$
      - paymentSystem    = 7$
      - me_as_aggregator = 1$
=========================
if payment -> `X`
 => A + X*B% + X*C%      -> TOTAL_COMISSION
 => X - $TOTAL_COMISSION -> OWNER_INCOME

-------------------------------------------

Процес обробки платежу:
1) Платіж прийнято - платіж пройшов базові перевірки і переданий у обробку
2) Платіж оброблено - платіж оброблено і сума мінус комісія платіжної системи мінус D доступна для виплати.
D - тимчасове блокування, % від загальної суми платежу. Даний платіж гарантовано пізніше перейде у статус "Платіж виконано".
3) Платіж виконано - сума D розблокована та також доступна для виплати.
4) Платіж виплачено - сума платежу, мінус комісії A+B+C переведена на баланс магазина

Платежі у статусі "оброблено" та "виконано" мають виплачуватись раз на день у межах доступного балансу клієнта.
Через тимчасове блокування D - не усі оброблені платежі можуть бути виплачені через нестачу балансу,
логіка за якою обираються платежі які будуть виплачені залишається на ваш розсуд.
Якщо платіж виплачується - він виплачується як сума платежу мінус A,B,С але НЕ D.

Тобто умовно якщо нам прийшло
3 платежі на 1010 грн, 51 грн і 102 грн,
які мінус A,B,C будуть 1000 грн, 50 грн і 100 грн,
при цьому платіж на 1010 грн у статусі "обролено" і з нього доступно "950 грн" (нехай D у даному випадку буде умовно 50 грн для суми у 1010),
а платежі на 51 і 102 грн у статусі "виконано" і з них доступно відповідно 50 і 100 грн.
То відповідно ми маємо загальний баланс 1100 грн при повній сумі до виплати 1150грн і можемо виплатити будь які 2 платежі з цих трьох на наш розсуд,
при цьому логіка вибори цих платежів має бути сталою.


-------------------------------------------
ПИТАННЯ:
Платіж прийшов у прикладі на 1010 грн
Потім "які мінус A,B,C будуть 1000 грн" і потрапляє у статус "оброблено" і доступно 950 грн
***********************
Але ж в описі пункта 2 "Платіж оброблено" написано що "сума мінус комісія платіжної системи" і нічого про комісію агрегатора.
А в прикладі віднімається A,B,C. Хіба тут "C" не зайве?
-------------------------------------------
plugins=(aliases git python pip pipenv pyenv conda conda-env themes nodenv copypath copyfile copybuffer catimg autojump encode64 extract golang history)

Напишіть базове мок-апі (без авторизації) для даної платіжної системи з наступним мінімально необхідним функціоналом:
1) Задати комісії "A" та "B" платіжної системи та тимчасове блокування "D"
2) Додати магазин: приймає на вхід назву магазину та вашу комісію C, на виході віддає id магазину
3) Прийняти платіж: приймає на вхід id магазину та суму платежу, на виході віддає id платежу
4) Перевести платежі у статус "оброблено", на вході приймає id платежів (у множині)
5) Перевести платежі у статус "виконано", на вході приймає id платежів (у множині)
6) Провести виплату платежів для магазину, на вході приймає id магазину - повертає суму виплати, список платежів у цій виплаті з id та сумою